 #!/usr/bin/pythonimport MySQLdbimport datetimeimport timeimport osimport sysimport getoptimport logginglogger = logging.getLogger('monit_log')logger.setLevel(logging.DEBUG)hdr = logging.StreamHandler()hdr.setLevel(logging.DEBUG)formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')hdr.setFormatter(formatter)logger.addHandler(hdr)def monitorator_container():    global conn, cur, name,ip    conn=MySQLdb.connect(host='202.114.10.148 ',port=3306,user='root',passwd='KFniuchao88',db='androidlxc')    cur = conn.cursor()    timebegin = datetime.datetime.strptime("00:00","%M:%S")    timeend = datetime.datetime.strptime("30:00","%M:%S")    delta = timeend - timebegin    lxc_number = cur.execute("SELECT `name`,`status`,`mtime`,`ip` FROM `lxc` WHERE `status` in (1,2)")    lxc_data = cur.fetchall()    if lxc_number:        logger.debug('checking container')        for i in range(0,lxc_number):            now = datetime.datetime.today()            if (now - lxc_data[i][2]) > delta:                name = resume_data[i][0]                if lxc_data[i][1]=='2':                    logger.debug('Pausing a free container')                    pause()                elif lxc_data[i][2]=='1':                    ip = pause_data[i][3]                    logger.debug('Stopping a paused container')                    stop()            conn.commit()    cur.close()    conn.close()def pause():     if(os.system("lxc-freeze -n "+name)==0):         cur.execute("UPDATE `lxc` SET `status` = '1' WHERE `name`='"+name+"'")         logger.debug('Pause a free container successfully')def stop():     if(os.system("lxc-stop -k -n "+name)==0):        cur.execute("UPDATE `lxc` SET `status` = '0' WHERE `name`='"+name+"'")        cur.execute("UPDATE `ip` SET `inuse` = '0' WHERE `ip`='"+ip+"'")        logger.debug('Stop a paused container successfully')def main():    monitorator_container()if __name__ == "__main__":     main()